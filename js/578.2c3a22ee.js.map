{"version":3,"file":"js/578.2c3a22ee.js","mappings":"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","sources":["webpack://shop/./src/components/PaginationView.vue","webpack://shop/./src/components/PaginationView.vue?d04d","webpack://shop/./src/views/Front/ProductsView.vue","webpack://shop/./src/views/Front/ProductsView.vue?c50b"],"sourcesContent":["<template>\r\n      <!-- 分頁按鈕 -->\r\n    <nav aria-label=\"Page navigation example\">\r\n      <!-- 至中ver -->\r\n        <ul class=\"pagination justify-content-center\">\r\n      <!-- 靠左ver -->\r\n        <!-- <ul class=\"pagination\"> -->\r\n        <li class=\"page-item\" :class=\"{ disabled : !pages.has_pre }\">\r\n            <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\" $emit('get-data', inside_pages.current_page - 1)\">\r\n            <span aria-hidden=\"true\">&laquo;</span>\r\n            </a>\r\n        </li>\r\n        <li class=\"page-item\" v-for=\" page in pages.total_pages \" :key=\" page + 'page'\" :class=\" {active: page === pages.current_page}\">\r\n            <!-- 追加 .prevent 無效 a link 轉址 -->\r\n            <a class=\"page-link\" href=\"\" @click.prevent=\" $emit('get-data', page) \"> {{ page }} </a>\r\n        </li>\r\n        <li class=\"page-item\" :class=\"{ disabled : !pages.has_next }\" >\r\n            <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\" $emit('get-data', inside_pages.current_page + 1)\" >\r\n            <span aria-hidden=\"true\">&raquo;</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n      return {\r\n        inside_pages: {}\r\n      }\r\n    },\r\n    props: ['pages'],\r\n    updated() {\r\n      this.inside_pages = this.pages\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./PaginationView.vue?vue&type=template&id=2c7fdead\"\nimport script from \"./PaginationView.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\Coding\\\\Learn-Code\\\\mingbookshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <!-- 分類 -->\n    <nav class=\"navbar navbar-expand-lg navbar-light justify-content-center border border-start-0 border-end-0 border-top border-bottom\">\n      <div class=\"navbar-nav flex-row overflow-auto navbar-custom-scroll\">\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"getData()\" onclick=\"event.preventDefault()\" href=\"#\">全部商品</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, getData(1, '分類一')\" onclick=\"event.preventDefault()\" href=\"#\">文物書籍</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, getData(1, '分類二')\" onclick=\"event.preventDefault()\" href=\"#\">周邊雜誌</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, getData(1, '分類三')\" onclick=\"event.preventDefault()\" href=\"#\">其他用品<span class=\"sr-only\">(current)</span></a>\n      </div>\n    </nav>\n    <!-- 分類END -->\n    <div class=\"container mt-md-5 mt-3 mb-7\" style=\"min-height: 100vh\">\n      <div class=\"row\">\n        <!-- 商品資料單項 -->\n        <div class=\"col-md-6 col-lg-4 col-xl-3\" v-for=\"item in products\" :key=\"item.id\" style=\"height: auto\">\n            <div class=\"card border-0 mb-4 position-relative rounded\">\n              <!-- img -->\n              <figure style=\"\" class=\"figure d-flex flex-column justify-content-center align-items-center position-relative pt-3\">\n                <i v-if=\"favorite.includes(item.id)\" @click=\"toggleFavorite(item.id)\" class=\"bi bi-heart-fill position-absolute btn btn-lg\" style=\"right: 3px; top: 3px; color:red;\"></i>\n                <i v-else @click=\"toggleFavorite(item.id)\" class=\"bi bi-suit-heart position-absolute btn btn-lg\" style=\"right: 3px; top: 3px; color:red;\"></i>\n                <router-link style=\"text-decoration:none;\" :to=\"`/product/${item.id}`\">\n                  <img style=\"height:200px\" :src=\"item.imageUrl\" alt=\"\" class=\"figure-img img-fluid rounded\">\n                </router-link>\n              </figure>\n              <!-- 商品資料 -->\n              <div class=\"card-body d-flex flex-column justify-content-center align-items-center pt-0\">\n                <h4 class=\"mb-0\">\n                  <router-link class=\"card-text text-muted\" :to=\"`/product/${item.id}`\" style=\"text-decoration:none;\">\n                    <!-- 商品標題 -->\n                    <p class=\"fs-5 mb-1\" style=\"color:black; height: 1.5rem; overflow:hidden;\" onmouseover=\"this.style.color='#B08968';\" onmouseout=\"this.style.color='';\">{{item.title}}</p>\n                  </router-link>\n                </h4>\n                <p class=\"card-text text-muted mb-0\" style=\"height: 4.5rem; overflow:hidden;\">{{item.description}}</p>\n                <div class=\"d-flex justify-content-between align-items-center col-12\">\n                  <div class=\"\">\n                    <p style=\"white-space: nowrap; text-align: center\" class=\"mb-0 text-muted text-end mt-2\"><del>NT$ {{ item.origin_price }} / {{ item.unit }}</del></p>\n                    <p style=\"white-space: nowrap; text-align: center\" class=\"h4 fw-bold text-end mt-1 fs-5\">NT$ {{ item.price }} / {{ item.unit }}</p>\n                  </div>\n                  <div>\n                    <button @click.prevent=\"addToCart(item)\" style=\"white-space: nowrap\" type=\"button\" class=\"btn btn-secondary text-end \">加入購物車</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n        </div>\n        <!-- 商品資料單項 END -->\n      </div>\n\n      <!-- 分頁元件 -->\n      <PaginationView class=\"mt-6\" :pages=\"pagination\" @get-data=\"getData\"></PaginationView>\n\n    </div>\n</template>\n\n<script>\n\nimport emitter from '@/libs/emitter'\nimport PaginationView from '@/components/PaginationView.vue'\nexport default {\n  data() {\n    return {\n      category: 'all', // 商品分類 分流用\n      products: [], // API抓下來儲存商品用 - 分頁ver\n      productsAll: [], // API抓下來儲存商品用 - allver\n      pagination: '', // 分頁用\n      favorite: JSON.parse(localStorage.getItem('favorite')) || [] // favorlist 儲存用 - 抓 localStorage 的資料 (需要轉乘json才能使用 localStorage存的是文字) (需要有預設值 [] 因為一開始是空的話會出錯 ex ? 結構問題)\n    }\n  },\n  components: {\n    PaginationView\n  },\n  methods: {\n    // 抓商品資料 - 分頁 + 分類\n    getData(page = 1, category){\n      let url = `${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/products/?page=${page}`\n      if (category) {\n        url = `${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/products/?page=${page}&category=${category}`\n      }\n      this.$http.get(url)\n      .then((res) => {\n        this.products = res.data.products\n        this.pagination = res.data.pagination\n      })\n      .catch((err) => {\n        console.dir(err)\n      })\n    },\n    // 抓商品資料 - All\n    getDataAll(){\n      this.$http.get(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/products/all`)\n      .then((res) => {\n        this.productsAll = res.data.products\n      })\n      .catch((err) => {\n        console.dir(err)\n      })\n    },\n    // 加入購物車 這裡 用html傳進來的 item抓id、qty先暫時用預設 還沒有做數量功能\n    addToCart(item, qty = 1){\n      const data = {\n        product_id: item.id,\n        qty\n      }\n      this.$http.post(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/cart`, { data })\n      .then(() => {\n        emitter.emit('get-cart') // 此處觸發 NAVBAR接收\n      })\n      .catch((err) => {\n        console.dir(err.data.message)\n      })\n    },\n    // 最愛狀態更換 - findIndex 判定 id是否存在 不存在加入 存在刪除\n    toggleFavorite(id){\n      const favoriteId = this.favorite.findIndex(item => item === id)\n      if (favoriteId === -1){ //  findIndex 沒有的話會 -1 而 -1 也是 true\n        this.favorite.push(id)\n      } else { // findIndex 有的話會回傳 目標在array的 index位置\n        this.favorite.splice(favoriteId, 1)\n      }\n    },\n      scrollToTop(){\n      window.scrollTo(0, 0)\n    }\n  },\n  watch: {\n    favorite: { // 因為是 陣列 所以需要 深層監聽\n      handler(){ // 控制器\n        // localStorage.setItem('自訂的欄位名稱', 要帶入的 JSON檔案 )\n        // localStorage 沒辦法存 JSON 所以得先轉成字串\n        localStorage.setItem('favorite', JSON.stringify(this.favorite)) // 資料變動的時候寫入到 localStorage\n      },\n      deep: true // 深層監聽\n    }\n  },\n  mounted() {\n    this.getData()\n    this.scrollToTop()\n  }\n}\n</script>\n","import { render } from \"./ProductsView.vue?vue&type=template&id=c45a5402\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\Coding\\\\Learn-Code\\\\mingbookshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_3","_hoisted_6","_createElementBlock","disabled","$props","has_pre","href","onClick","_ctx","$data","current_page","_Fragment","_renderList","total_pages","page","active","key","_hoisted_5","has_next","data","inside_pages","props","updated","this","pages","__exports__","render","_hoisted_4","style","onmouseover","onmouseout","$options","onclick","item","id","includes","_createVNode","_component_router_link","to","src","imageUrl","alt","_toDisplayString","title","description","origin_price","unit","price","type","_hoisted_21","_component_PaginationView","onGetData","category","products","productsAll","pagination","favorite","JSON","parse","localStorage","getItem","components","PaginationView","methods","getData","url","$http","get","then","res","catch","err","console","dir","getDataAll","addToCart","qty","product_id","post","emitter","message","toggleFavorite","favoriteId","findIndex","push","splice","scrollToTop","window","scrollTo","watch","handler","setItem","stringify","deep","mounted"],"sourceRoot":""}