{"version":3,"file":"js/212.f012845c.js","mappings":"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","sources":["webpack://shop/./src/views/Front/CreateOrderView.vue","webpack://shop/./src/views/Front/CreateOrderView.vue?970f"],"sourcesContent":["<template>\n<div class=\"container\" style=\"min-height: 100vh\">\n  <div v-if=\"ready === true\" class=\"row\">\n    <!-- card 付款狀態 -->\n    <div v-if=\"cartData.carts.length === 0\" class=\"d-flex justify-content-center my-5\">\n      <div class=\"col-md-6 card text-center\" style=\"\">\n        <div class=\"card-body\">\n          <strong ><p class=\"m-0 text-primary\" style=\"font-size: 2rem;\">目前沒有待確認訂單</p></strong>\n          <router-link to=\"/products\">\n          <button type=\"button\" class=\"col-4 btn btn-outline-primary mt-2\">前去購買</button>\n          </router-link>\n        </div>\n      </div>\n    </div>\n    <!-- 購買步驟狀態 -->\n    <div v-else class=\"row d-flex flex-nowrap justify-content-center align-items-center\">\n      <div style=\"max-width: 18rem;\" class=\"col-3 d-none d-sm-block  text-balck bg-info my-5 mx-4 rounded\">\n        <div class=\"d-flex flex-column flex-nowrap justify-content-center align-items-center\">\n        <i class=\"bi bi-check2-circle mt-2\" style=\"font-size:40px\"></i>\n          <p class=\"card-text text-center m-0\">Step1</p>\n          <p class=\"card-text text-center mb-2\">確認訂單</p>\n        </div>\n      </div>\n      <div style=\"max-width: 18rem;\" class=\"col-3 d-none d-sm-block text-white bg-secondary my-5 mx-4 rounded\">\n        <div class=\"d-flex flex-column flex-nowrap justify-content-center align-items-center\">\n          <i class=\"bi bi-dash-circle-dotted mt-2\" style=\"font-size:40px\"></i>\n          <p class=\"card-text text-center m-0\">Step2</p>\n          <p class=\"card-text text-center mb-2\">建立訂單</p>\n        </div>\n      </div>\n      <div style=\"max-width: 18rem;\" class=\"col-3 d-none d-sm-block  text-balck bg-info my-5 mx-4 rounded\">\n        <div class=\"d-flex flex-column flex-nowrap justify-content-center align-items-center\">\n          <i class=\"bi bi-dash-circle-dotted mt-2\" style=\"font-size:40px\"></i>\n          <p class=\"card-text text-center m-0\">Step3</p>\n          <p class=\"card-text text-center mb-2\">付款</p>\n        </div>\n      </div>\n      <!-- for rwd 顯示 單個 購買狀態 -->\n      <div style=\"max-width: 18rem;\" class=\"col-10 d-flex align-items-center d-block d-sm-none text-white bg-secondary my-5 mx-4 rounded\">\n        <div class=\"d-flex flex-column flex-nowrap justify-content-center align-items-center col-12\">\n          <i class=\"bi bi-dash-circle-dotted mt-2 text-center\" style=\"font-size:40px;\"></i>\n          <p class=\"card-text text-center m-0\">Step2</p>\n          <p class=\"card-text text-center mb-2\">建立訂單</p>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"cartData.carts.length > 0\" class=\"row\">\n      <!-- 表單驗證 -->\n      <div class=\"col-xl-12\">\n        <div class=\"my-3 row justify-content-center\">\n          <!-- @submit=\"createOrder\" -->\n          <Form @submit=\"createOrder\" ref=\"form\" class=\"col-md-7\" v-slot=\"{ errors }\" >\n            <h4 class=\"d-none d-xl-block\">收件人資訊</h4>\n            <h4 class=\"d-xl-none\">收件人資訊</h4>\n            <hr>\n            <div class=\"mb-3\">\n              <label for=\"email\" class=\"form-label\">Email</label>\n            <Field v-model=\"form.user.email\" id=\"email\" name=\"email\" type=\"email\" class=\"form-control\"\n                        :class=\"{ 'is-invalid': errors['email'] }\" placeholder=\"請輸入 Email\" rules=\"required|email\"\n                      ></Field>\n              <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n            </div>\n\n            <div class=\"mb-3\">\n              <label for=\"name\" class=\"form-label\">收件人姓名</label>\n              <Field v-model=\"form.user.name\" id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['姓名'] }\"\n                        placeholder=\"請輸入姓名\" rules=\"required\"></Field>\n              <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n            </div>\n\n            <div class=\"mb-3\">\n              <label for=\"tel\" class=\"form-label\">收件人電話</label>\n              <Field v-model=\"form.user.tel\" id=\"number\" name=\"電話\" type=\"number\" class=\"form-control\" :class=\"{ 'is-invalid': errors['電話'] }\"\n                        placeholder=\"請輸入電話\" :rules=\"isPhone\" style=\"-webkit-appearance: none;\" ></Field>\n              <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n            </div>\n\n            <div class=\"mb-3\">\n              <label for=\"address\" class=\"form-label\">收件人地址</label>\n              <Field v-model=\"form.user.address\" id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['地址'] }\"\n                        placeholder=\"請輸入地址\" rules=\"required\" ></Field>\n              <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n            </div>\n\n            <div class=\"mb-3\">\n              <label for=\"message\" class=\"form-label\">留言</label>\n              <textarea v-model=\"form.message\" id=\"message\" class=\"form-control\" cols=\"30\" rows=\"3\" ></textarea>\n            </div>\n            <div class=\"text-end\">\n              <button type=\"submit\" class=\"col-12 btn btn-primary\" :disabled=\"Object.keys(errors).length > 0 || cartData.carts.length === 0 \"\n                      >送出訂單</button>\n            </div>\n          </Form>\n\n        </div>\n      </div>\n      <!-- 表單驗證 結束 -->\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\n\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data() {\n    return {\n      ready: false,\n      cartData: {\n        // length 無效關係 生命週期原因 所以這裡事先寫好結構\n        carts: []\n      },\n      products: [],\n      productsID: '',\n      isLoadingItem: '',\n      form: {\n          user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: ''\n        },\n        message: ''\n      },\n      couponCode: '2022BOOK',\n      couponActive: false,\n      couponErr: true,\n      couponTotal: 0\n    }\n  },\n  components: {\n  },\n  methods: {\n    // 以下購物車相關\n    // 抓購物車資料\n    getCart(){\n      this.$http.get(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/cart`)\n      .then((res) => {\n        this.cartData = res.data.data\n        this.ready = true\n      })\n      .catch((err) => {\n        alert(err.data.message)\n      })\n    },\n    // 更改購物車商品數量\n    updataCartItem(item){\n      const data = {\n        product_id: item.id,\n        qty: item.qty\n      }\n      this.isLoadingItem = item.id\n      this.$http.put(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/cart/${item.id}`, { data })\n      .then(() => {\n        this.getCart()\n        this.isLoadingItem = ''\n        // 這是通知 致行 navbar 的\n        emitter.emit('get-cart', () => {\n          this.getCart()\n        })\n      })\n      .catch((err) => {\n        console.dir(err.data.message)\n        alert(err.data.message)\n      })\n    },\n    // 刪除購物車 單體\n    removeCartItem(id){\n      this.isLoadingItem = id\n      this.$http.delete(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/cart/${id}`)\n      .then((res) => {\n        this.getCart()\n        // 這是通知 致行 navbar 的\n        emitter.emit('get-cart', () => {\n          this.getCart()\n        })\n        this.isLoadingItem = ''\n      })\n      .catch((err) => {\n        alert(err.data.message)\n      })\n    },\n    // 刪除購物車 全部\n    removeAllCartItem(){\n      this.$http.delete(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/carts`)\n      .then((res) => {\n        this.getCart()\n        // 這是通知 致行 navbar 的\n        emitter.emit('get-cart', () => {\n          this.getCart()\n        })\n      })\n      .catch((err) => {\n        alert(err.data.message)\n      })\n    },\n    useCoupon(){ // 他會抓購物車的價錢\n      const data = {\n              code: this.couponCode\n          }\n      this.$http.post(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/coupon`, { data })\n          .then((res) => {\n              this.couponActive = true\n              this.couponErr = true\n              this.couponTotal = res.data.data.final_total\n              console.log('useCoupon', res.data, this.couponTotal)\n          })\n          .catch((err) => {\n              this.couponErr = false\n              console.log('useCoupon', err.response.data.message)\n              console.dir('useCoupon', err.response.data.message)\n          })\n    },\n    createOrder(){\n      const order = this.form\n      this.$http.post(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/order`, { data: order })\n      .then((res) => {\n        this.$refs.form.resetForm()\n        this.getCart()\n        this.form.message = ''\n        // 這是通知 致行 navbar 的\n        emitter.emit('get-cart', () => {\n          this.getCart()\n        })\n        this.$router.push(`/pay/${res.data.orderId}`)\n      })\n    },\n    scrollToTop(){\n      window.scrollTo(0, 0)\n    },\n    // 購物車相關結束\n    // 以下表單驗證用\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼' // phoneNumber.test(外面表單輸入的值?) ? true的結果 : false的結果 嗎\n    }\n  },\n  mounted() {\n    this.getCart()\n    this.scrollToTop()\n  }\n}\n</script>\n\n<style lang=\"sass\">\n  input::-webkit-outer-spin-button\n  input::-webkit-inner-spin-button\n    -webkit-appearance: none\n    margin: 0\n</style>\n","import { render } from \"./CreateOrderView.vue?vue&type=template&id=08d21eba\"\nimport script from \"./CreateOrderView.vue?vue&type=script&lang=js\"\nexport * from \"./CreateOrderView.vue?vue&type=script&lang=js\"\n\nimport \"./CreateOrderView.vue?vue&type=style&index=0&id=08d21eba&lang=sass\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\Coding\\\\Learn-Code\\\\mingbookshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","type","_hoisted_9","for","_createElementBlock","$data","carts","length","_hoisted_6","_createVNode","_component_router_link","to","_hoisted_7","_hoisted_13","_component_Form","onSubmit","$options","ref","errors","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_21","_component_Field","user","email","$event","id","name","placeholder","rules","_component_ErrorMessage","_hoisted_23","_hoisted_25","tel","_hoisted_27","address","_hoisted_29","message","cols","rows","disabled","Object","keys","_hoisted_31","data","ready","cartData","products","productsID","isLoadingItem","form","couponCode","couponActive","couponErr","couponTotal","components","methods","getCart","this","$http","get","then","res","catch","err","alert","updataCartItem","item","product_id","qty","put","emitter","console","dir","removeCartItem","delete","removeAllCartItem","useCoupon","code","post","final_total","log","response","createOrder","order","$refs","resetForm","$router","push","orderId","scrollToTop","window","scrollTo","isPhone","value","phoneNumber","test","mounted","__exports__","render"],"sourceRoot":""}